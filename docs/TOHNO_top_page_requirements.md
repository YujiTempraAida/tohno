# TOHNO トップページ 要件定義書（ドラフト）

## 概要
TOHNOは、トーナメントオーガナイザー（TO）と参加者の両方にとって便利なツール群を提供するWebプラットフォーム。トップページではログイン不要で誰でも使えるユーティリティ機能と、start.ggアカウント連携が必要なTO向け本格ツールの両方への導線を用意し、段階的な導入と拡張を想定している。

## 機能構成
### トップページ
- **ヒーローエリア**
  - サービス名、キャッチコピー、イメージビジュアル
  - CTA：ログインボタン or すぐ使えるツール一覧へのスクロール誘導

- **TO専用ゾーン（ログイン必要）**
  - トップページ内の上位に導線配置（ユーティリティより先）
  - ログイン後に表示 or 専用エリアへの導線（ログインで解放）
  - 初期搭載ツール：
    - 受付高速化アプリ（以下詳細）

- **ユーティリティセクション（ログイン不要）**
  - 一般ユーザー向けの便利ツール一覧をカード形式で表示
  - 将来的に別ページへの分離や順序変更の可能性を考慮
  - 初期搭載ツール：
    - ダブルエリミネーション所要時間試算ツール（以下詳細）

- **拡張性を意識したUI構成**
  - 新規機能が今後追加しやすいセクション設計

---

## 初期ユーティリティツール①：ダブルエリミネーション所要時間試算
### 概要
複雑なトーナメントの所要時間を簡単に見積もれる計算機。

### 入力項目
- 参加人数（entrants）
- Phase数
- Wave数
- Pool数
- モニター数（setups）
- 1試合の所要時間（time）
- 抜け人数（progress）

### 出力項目
- 所要時間（予想）
- 必要なローテーション数（rotation）
  - モニター数により同時に処理可能な単位 = 1ローテーション
- 各ローテーションにおける試合ラウンド（例：Winners R1, Losers R1など）

### アルゴリズム概要
- トーナメントで行う総試合数 = 参加人数 * 2 - 1（または -2）をベースに
- Phase/Wave/Poolごとに参加人数を分割し、各Poolの抜け人数から必要試合数を算出
- 各Poolのモニター数で割り、ローテーション数を決定
- 1試合の所要時間 × ローテーション数 で合計時間を算出

---

## 初期TO向けツール②：受付高速化アプリ（start.gg連携）
### 概要
start.ggの受付を現地でスムーズに処理するためのTO支援アプリ。オンラインAPIの遅さを回避し、ローカルで高速動作可能に。

### フロー
1. start.ggの参加者CSVを事前にDLし、DBにインポート
2. QRコードから参加者ID & トークンを取得
3. DBを参照して参加者ステータス・支払い状況を即時表示
4. 決済状況やVenue Pass情報に応じて「受付要否」を明示
5. その場で枠変更や現地決済金額変更 → DBに即時反映

### 機能例
- プレチェックイン機能
- 受付済み一覧表示（スタッフ向け）
- 現地変更に伴う金額再計算
- start.ggへの反映は別途まとめて実施（リアルタイムでなくてもOK）

---

## 認証仕様
- start.gg OAuth によるログイン（現時点では開発中のためリダイレクト先は仮）
- 将来的にはログイン済みユーザー向けの管理UIを拡張予定

---

## 今後の機能追加予定（メモ）
### ユーティリティ系
- start.ggのPDF進行表にメモ書きを残せるツール

### TO向け本格機能
- シーディング支援（過去戦績やユーザー情報との連携）
- キャンセル管理（参加辞退反映）
- Discord連携によるロール付与（例：参加者・進行中・敗退など）

